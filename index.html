<script>
const envelope = document.getElementById("envelope");
const texto = document.getElementById("texto").innerText;
const resultado = document.getElementById("resultado");
const enviar = document.getElementById("enviar");
const musica = document.getElementById("musica");

let abierta = false;
let respuestaTexto = "";

function hablar(mensaje) {
  speechSynthesis.cancel();
  const voz = new SpeechSynthesisUtterance(mensaje);
  voz.lang = "es-ES";
  voz.rate = 0.95;
  speechSynthesis.speak(voz);
}

/* Abrir carta */
envelope.addEventListener("click", () => {
  if (!abierta) {
    envelope.classList.add("open");
    abierta = true;
    musica.volume = 0.3;
    musica.play();
    hablar(texto + " Â¿Quieres ser mi San ValentÃ­n?");
  }
});

/* Responder */
function responder(si, event) {
  event.stopPropagation();
  document.querySelector(".buttons").style.display = "none";
  resultado.style.display = "block";
  enviar.style.display = "block";

  respuestaTexto = si
    ? "ğŸ’– RespondiÃ³ SÃ ğŸ’– Me hiciste muy feliz. ğŸ’Œ"
    : "ğŸ’” RespondiÃ³ NO ğŸ’” Gracias por leer mi carta.";

  resultado.textContent = respuestaTexto;
  hablar(respuestaTexto);
}

/* ğŸ“² WhatsApp */
function enviarWhatsApp() {
  const numero = "51930246091"; // âœ… TU NÃšMERO REAL
  const url = `https://wa.me/${numero}?text=${encodeURIComponent(respuestaTexto)}`;
  window.open(url, "_blank");
}

/* âœ‰ï¸ Correo */
function enviarCorreo() {
  const subject = "Respuesta a la carta ğŸ’–";
  const body = respuestaTexto;
  window.location.href =
    `mailto:ortizjampier@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
}
</script>
